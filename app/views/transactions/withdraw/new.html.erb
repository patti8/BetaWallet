<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 class="h2">Withdraw [Team Balance: <b>Rp. <%= Team.find_by(id: params[:team]).balance %></b>] </h1>   
</div>

<%= params[:team] %>

<% if notice.present? %>
    <div class="alert alert-success" role="alert">
        <%= notice %>
    </div
<% end %>

<% if flash[:error].present? %>
    <div class="alert alert-warning" role="alert">
    <%= flash[:error] %>
    </div>
<% end %>


<div class="d-flex align-items-center justify-content-center">
    
    <div class="card card-bg m-2 mt-5">

        <div class="card-body">

            <%= form_with model: @transaction, url: transactions_withdraw_index_path do |f| %>
                
                <div class="mb-3">
                    <%= f.label :target_wallet, class: "form-label" %>
                    
                    <%= f.hidden_field :source_wallet, class: "form-control", autofocus: true, value: params[:team] %>
                    <%= f.hidden_field :target_wallet, class: "form-control", autofocus: true, value: current_user.id %>
                    
                    <input type="text" class="form-control" value="<%= current_user.first_name + ' ' + current_user.last_name %>" autofocus="true" disabled>
                </div>

                <div class="mb-3">
                    <%= f.label :amount, class: "form-label" %>
                    <%= f.number_field :amount, class: "form-control", autofocus: true, require: "required" %>
                </div>            

                <div class="mb-3">
                    <%= f.submit "Withdraw", class: "btn btn-custom1"%>
                </div>

            <% end %>

        </div>

    </div>
    
</div>



<div class="container m-3">
    <% if @withdraw.present? %>
        <div class="row">
            <div class="col">
                <div class="table-responsive">
            
                    <table class="table table-striped table-sm">
        
                        <thead>
                            <tr>
                                <th scope="col">#</th>
                                <th scope="col">ID TRANSACTION</th>
                                <th scope="col">TYPE</th>
                                <th scope="col">AMOUNT</th>
                                <th scope="col">TARGET WALLET</th>
                                <th scope="col">DATE</th>
                            </tr>
                        </thead>

                        <tbody>

                            <% @withdraw.each_with_index do |tr, index| %>
                                <tr>
                                    <td><%= index+=1%></td>
                                    <td><%= tr.id %></td>
                                    <td><%= tr.type %></td>
                                    <td><%= tr.amount %></td>
                                    <td><%= tr.target_wallet %></td>
                                    <td><%= tr.created_at %></td>
                                </tr>
                            <% end %>
                            
                        </tbody>
                        
                    </table>

                </div>
            </div>
        </div>

    <% else %>
        <div class="alert alert-warning" role="alert">
            data tidak ditemukan
        </div>
    <% end %>
</div>
 